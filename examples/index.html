<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>threecs | Examples</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="container">
      <nav class="nav">
        <h1>
          <a href=".."> threecs: </a>
        </h1>
        <h3>Examples:</h3>
        <li>
          <a href="./rotating-cube.html" target="iframe"> Rotating Cube </a>
        </li>
        <li>
          <a href="./entity-removal.html" target="iframe"> Entity Removal </a>
        </li>
        <li>
          <a href="./simple-character-controller.html" target="iframe">
            Simple Character Controller
          </a>
        </li>
        <li>
          <a href="./simple-physics.html" target="iframe"> Simple Physics </a>
        </li>
        <li>
          <a href="./physics-benchmark.html" target="iframe">
            Physics Benchmark
          </a>
        </li>
        <li>
          <a href="./physics-raycaster.html" target="iframe">
            Physics Raycaster
          </a>
        </li>
        <li>
          <a href="./physics-based-character-controller.html" target="iframe">
            Physics Based Character Controller
          </a>
        </li>
        <li>
          <a href="./outdoor-festival.html" target="iframe">
            Hubs: Outdoor Festival
          </a>
        </li>
      </nav>
      <iframe name="iframe" allow="autoplay" frameborder="0"></iframe>
    </div>
    <script>
      const iframe = document.querySelector("iframe");

      const firstParams = new URLSearchParams(location.search);
      const firstExample = firstParams.get("example");

      if (firstExample) {
        iframe.src = `./${firstExample}.html`;
      } else {
        iframe.src = "./rotating-cube.html";
      }

      iframe.addEventListener("load", (e) => {
        const params = new URLSearchParams(location.search);
        const [_, exampleName] = iframe.contentWindow.location.pathname.match(
          /\/examples\/([^.]+)\.html/
        );
        params.set("example", exampleName);
        history.replaceState({}, "", `${location.pathname}?${params}`);
      });
    </script>
  </body>
</html>
